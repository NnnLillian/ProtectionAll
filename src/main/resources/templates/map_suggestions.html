<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="images/favicon.png" type="image/png">

    <title>装备保障系统</title>

    <link href="css/style.default.css" rel="stylesheet">
    <link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="baidumapv2/baidumap_offline_v2_load.js"></script>
    <script type="text/javascript" src="baidumapv2_demo/jquery.js"></script>
    <script type="text/javascript" src="baidumapv2_demo/layer/layer.js"></script>
    <link rel="stylesheet" type="text/css" href="baidumapv2/css/baidu_map_v2.css"/>

    <style type="text/css">
        body, html, #map_demo, #tab, #mapfrm {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        td {
            font-size: 14px
        }

        h4 {
            margin: 0;
        }

        #map_demo1, #map_demo2 {
            height: 50%
        }
    </style>
</head>
<body>
<!-- Preloader -->
<div id="preloader">
    <div id="status"><i class="fa fa-spinner fa-spin"></i></div>
</div>
<script src="js/echarts.js"></script>
<section>

    <div class="leftpanel">

        <div class="logopanel">
            <h1><span>[</span> 装备保障系统 <span>]</span></h1>
        </div><!-- logopanel -->

        <div class="leftpanelinner">

            <!-- This is only visible to small devices -->
            <div class="visible-xs hidden-sm hidden-md hidden-lg">
                <div class="media userlogged">
                    <img alt="" src="images/photos/loggeduser.png" class="media-object">
                    <div class="media-body">
                        <h4>小张</h4>
                        <!--    <span>"Life is so..."</span> -->
                    </div>
                </div>

                <h5 class="sidebartitle actitle">账户</h5>
                <ul class="nav nav-pills nav-stacked nav-bracket mb30">
                    <li><a href="profile.html"><i class="fa fa-user"></i> <span>个人信息</span></a></li>
                    <li><a href=""><i class="fa fa-cog"></i> <span>个人信息修改</span></a></li>
                    <li><a href=""><i class="fa fa-question-circle"></i> <span>帮助</span></a></li>
                    <li><a href="signout.html"><i class="fa fa-sign-out"></i> <span>退出</span></a></li>
                </ul>
            </div>

            <h3 class="sidebartitle">装备保障方案</h3>
            <ul class="nav nav-pills nav-stacked nav-bracket">
                <li class="active"><a href="completeness.html"><i class="fa fa-file-text"></i> <span>方案库</span></a></li>
                <li><a href="scheme_model.html"><i class="fa fa-home"></i> <span>方案模板库</span></a></li>
            </ul>


            <h5 class="sidebartitle">保障方案资料</h5>
            <ul class="nav nav-pills nav-stacked nav-bracket">
                <!--<li class="nav-parent"><a href=""><i class="fa fa-flag"></i> <span>装备使用保障方案</span></a>-->
                <!--<ul class="children">-->
                <!--<li><a href="general-forms.html"><i class="fa fa-caret-right"></i> 任务类型</a></li>-->
                <!--<li><a href="form-layouts.html"><i class="fa fa-caret-right"></i> 保障组类别</a></li>-->
                <!--<li><a href="form-validation.html"><i class="fa fa-caret-right"></i> 器材保障组要求</a></li>-->
                <!--<li><a href="form-wizards.html"><i class="fa fa-caret-right"></i> 保障计划类别</a></li>-->
                <!--</ul>-->
                <!--</li>-->
                <li class="nav-parent"><a href=""><i class="fa fa-suitcase"></i> <span>装备维修保障方案</span></a>
                    <ul class="children">
                        <li><a href="buttons.html"><i class="fa fa-caret-right"></i> 维修保障任务类型</a></li>
                        <li><a href="icons.html"><i class="fa fa-caret-right"></i> 交通保障类型</a></li>
                        <li><a href="typography.html"><i class="fa fa-caret-right"></i> 设备保障类型</a></li>
                    </ul>
                </li>
                <li><a href="maps.html"><i class="fa fa-map-marker"></i> <span>气象水文保障信息</span></a></li>
                <li class="nav-parent"><a href="tables.html"><i class="fa fa-th-list"></i> <span>特情处置预案</span></a>
                    <ul class="children">
                        <li><a href="buttons.html"><i class="fa fa-caret-right"></i>特情处置原则</a></li>
                        <li><a href="#"><i class="fa fa-caret-right"></i>伪装措施组织</a></li>
                        <li><a href="#"><i class="fa fa-caret-right"></i>防护措施组织</a></li>
                    </ul>
                </li>
            </ul>

        </div><!-- leftpanelinner -->
    </div><!-- leftpanel -->

    <div class="mainpanel">

        <div class="headerbar">

            <a class="menutoggle"><i class="fa fa-bars"></i></a>

            <form class="searchform" action="index.html" method="post">
                <input type="text" class="form-control" name="keyword" placeholder="查找..."/>
            </form>

            <div class="header-right">
                <ul class="headermenu">
                    <li>
                        <div class="btn-group">
                            <button class="btn btn-default dropdown-toggle tp-icon" data-toggle="dropdown">
                                <i class="glyphicon glyphicon-user"></i>
                                <span class="badge">2</span>
                            </button>
                            <div class="dropdown-menu dropdown-menu-head pull-right">
                                <h5 class="title">您有2条未读信息</h5>
                            </div>
                        </div>
                    </li>

                    <li>
                        <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                <img src="images/photos/loggeduser.png" alt=""/>
                                小张
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-usermenu pull-right">
                                <li><a href="profile.html"><i class="glyphicon glyphicon-user"></i> 个人信息</a></li>
                                <li><a href="#"><i class="glyphicon glyphicon-cog"></i> 个人信息修改 </a></li>
                                <li><a href="#"><i class="glyphicon glyphicon-question-sign"></i> 帮助</a></li>
                                <li><a href="signin.html"><i class="glyphicon glyphicon-log-out"></i> 退出</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div><!-- header-right -->

        </div><!-- headerbar -->
        <div class="pageheader">
            <h2><i class="fa fa-map-marker"></i> 环境地点特情分析 </h2>
            <div class="breadcrumb-wrapper">
                <span class="label">当前位置:</span>
                <ol class="breadcrumb">
                    <li><a href="index.html">装备保障系统</a></li>
                    <li class="active"></li>
                </ol>
            </div>
        </div>

        <div class="contentpanel">

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">地图数据信息</h4>
                </div><!-- panel-heading -->
                <div class="panel-body">
                    <div class="row">
                        <div class="panel panel-default col-md-12" style="height:800px">
                            <button onclick="addPolyLine();" class="btn btn-primary mr10">生成折线</button>
                            <button onclick="addLine()" class="btn btn-primary mr10">生成直线</button>
                            <button onclick="calDegree()" class="btn btn-primary mr10">角度值</button>
                            <button onclick="calDistance()" class="btn btn-primary mr10">距离值</button>
                            <button onclick="removeLine()" class="btn btn-default mr10">清除</button>
                            <div class="mb20"></div>
                            <div class="mb10" id="map_demo">1</div>
                        </div><!-- col-md-12 -->
                    </div><!-- row -->

                </div><!-- panel-body -->
                <div class="panel-footer"></div>
            </div><!-- panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h5 class="panel-title">历史温度数据</h5>
                </div>
                <div class="panel-body">
                    <div class="row col-md-12">
                            <h5 class="subtitle mb5">温度图表</h5>
                            <p class="mb15"></p>
                            <div id="pressureTable" style="width: 100%; height: 500px; margin-bottom: 20px"></div>
                    </div><!-- row -->
                </div><!-- panel-body -->
            </div><!-- panel -->

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h5 class="panel-title">历史气压数据</h5>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-8" id="try">
                            <h5 class="subtitle mb5">气压图表</h5>
                            <p class="mb15"></p>
                            <div id="basicflot" style="width: 100%; height: 500px; margin-bottom: 20px"></div>
                        </div><!-- col-sm-8 -->
                        <div class="col-sm-4">
                            <h5 class="subtitle mb5">防低压</h5>
                            <p class="mb15"></p>
                            <ul>

                                <li>
                                    低气压条件下，要重点关注雷达的高电压，大功率器件，发射系统、显示器的高压电源等部位，一是在使用中要针对可能出现的打火，增加静电循环检查，器件外观检查，疑点部位测量检查、高压线路走向间隔检查。
                                </li>
                                <li>
                                    对接触部分涂抹绝缘胶，防止打火放电；高压导线应尽量拉直平滑，远离低压线，
                                </li>
                                <li>
                                    控制好雷达发射机升高压节奏，适当增加电子管预热时间，必要时调低发射机高压，将发射机高压置规定值下限，尽量限制引发发射机打火的诱因，
                                </li>
                                <li>
                                    天馈线系统波导气压严格按照规定值充气，防止天馈线系统打火，发现打火应立即关机。
                                </li>
                                <li>
                                    对接接触器、继电器等有触点的电器，要定期用酒精擦拭。
                                </li>
                                <li>
                                    装备进高原后，空气中含氧量降低，动力系统效率低，供电系统输出功率降低和兵器载车承载能力降低，为了保证兵器装备的正常工作，应结合高原环境特点，加强装备动力系统调整维护工作，一是及时给水箱加满水并拧紧水箱盖，调整通风设施，降低发动机的工作环境温度，防止柴油机水箱开锅；可根据要求更换水箱内的冷却水，提高柴油机水箱冷却水的沸点。二是根据驻地海拔高度和空气密度，对发动机的柴油机供油提前角进行调整，使进入汽缸中的可燃混合气的密度适当，解决燃油燃烧不充分、发动机冒黑烟的问题，三是对电源车的手油泵及燃油管路用密封胶进行密封，防止燃油系统进空气，影响柴油机工作状态。
                                </li>
                            </ul>


                        </div><!-- col-sm-4 -->
                    </div><!-- row -->
                </div><!-- panel-body -->
            </div><!-- panel -->

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h5 class="panel-title">历史沙尘数据</h5>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <p class="mb15">沙尘颗粒表</p>
                            <div id="sandyDataTable" style="width: 100%; height: 500px; margin-bottom: 20px"></div>
                        </div><!-- col-sm-8 -->

                        <div class="col-sm-4">
                            <h5 class="subtitle mb5">防沙尘</h5>
                            <p class="mb15"></p>

                            <ul>
                                <li>
                                    及时关紧车厢门窗，非工作状态下，装备外露的空调、冷却装置、通风口等要进行遮盖，防止沙尘侵入，动力系统的进气口要尽量避开风的来袭方向。
                                </li>
                                <li>
                                    根据风力大小，适时加固兵器装备，加盖篷布，必要时，撤收易受损伤的旋转关节、雷达的升降导轨等要涂油，用帆布或油纸包裹，工作时及时除掉油脂，经常清洗空气清器，防止空气中的沙尘颗粒堵塞空气滤清器的进气孔。
                                </li>
                                <li>
                                    视情组织装备的清洁保养，重点进行兵器内部除尘，电缆头维护，旋转机构润滑及滤尘网，空气滤清器清洗工作，风沙过后要对武器装备进行全面，彻底的维护擦拭，将沙土清除干净。
                                </li>
                            </ul>
                        </div><!-- col-sm-4 -->
                    </div><!-- row -->
                </div><!-- panel-body -->
            </div><!-- panel -->

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h5 class="panel-title">历史雨雪数据</h5>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-8">
                            <p class="mb15">雨雪量表</p>
                            <div id="rainyDataTable" style="width: 100%; height: 500px; margin-bottom: 20px"></div>
                        </div><!-- col-sm-8 -->

                        <div class="col-sm-4">
                            <h5 class="subtitle mb5">防潮湿、防雷暴</h5>
                            <p class="mb15"></p>
                            <ul>
                                <li>
                                    架设便携式避雷针。在雷达阵地，发射阵地，技术保障阵地和库房要按技术要求设置避雪装置，并定期检查，确保接地良好
                                </li>
                                <li>
                                    增加备件，针对潮湿环境下电气设备易打火，击穿的情况应尽可能多准备备件，尤其是高压部位备件一定要齐全，保证出现异常情况能及时处置
                                </li>
                                <li>
                                    通风去除湿气。应将装备放置于通风位置，保持空气流通，晴朗或湿度较小的天气，应打开车厢门窗，进行自然通风去潮。
                                </li>
                            </ul>
                        </div><!-- col-sm-4 -->
                    </div><!-- row -->
                </div><!-- panel-body -->
                <div class="panel-footer">
                    <div class="col-sm-12 col-sm-offset-3" style="text-align: center; margin: 0 auto">
                        <!--<button class="btn btn-primary">保存</button>&nbsp;-->
                        <button class="btn btn-default mr30" onclick="javascript:history.go(-1);">
                            返回
                        </button>
                        <button type="button" id="myGeographicSuggestions" class="btn btn-primary">继续</button>
                    </div>
                </div>
            </div><!-- panel -->

        </div><!-- mainpanel -->

    </div>

</section>


<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/jquery-migrate-1.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/jquery.sparkline.min.js"></script>
<script src="js/toggles.min.js"></script>
<script src="js/retina.min.js"></script>
<script src="js/jquery.cookies.js"></script>

<script src="js/jquery.datatables.min.js"></script>
<script src="js/raphael-2.1.0.min.js"></script>
<script src="js/chosen.jquery.min.js"></script>
<script src="js/select2.min.js"></script>

<script src="js/custom.js"></script>
<script src="js/dashboard.js"></script>

<!--&lt;!&ndash; 折线图 &ndash;&gt;-->
<script src="js/flot/jquery.flot.min.js"></script>
<script src="js/flot/jquery.flot.resize.min.js"></script>
<script src="js/flot/jquery.flot.spline.min.js"></script>
<script src="js/morris.min.js"></script>
<script src="js/raphael-2.1.0.min.js"></script>

<script>
    // 跳转按钮
    $("#myGeographicSuggestions").click(function () {

        var scheme = {
            scheme_id:localStorage.getItem("scheme_id")
        };

        var schemeStr = JSON.stringify(scheme);
        console.log(schemeStr);
        $.ajax({
            type: 'POST',
            data: schemeStr,
            contentType: "application/json;charset=UTF-8",
            url: "/AddSchemeGroup",
            dataType: "json",
            async: false,     // 取消异步加载
            success: function (data) {
                alert("Add Equipment Success");
                window.location.href = "/edit_people";
            },
            error: function () {
                console.error("error");

            }
        })
    });

    // 加载压力图
    $("#pressureTable").load("geographic_temperature");

</script>

<!-- 折线图 -->
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('sandyDataTable'));

    // 指定图表的配置项和数据
    var option = {
        backgroundColor: '#FBFBFB',
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['沙尘数据']
        },

        calculable: true,


        xAxis: [
            {
                axisLabel: {
                    rotate: 30,
                    interval: 0
                },
                axisLine: {
                    lineStyle: {
//                        color: '#000080'
                    }
                },
                type: 'category',
                boundaryGap: false,
                data: function () {
                    var list = [];
                    for (var i = 0; i <= 7; i++) {
                        list.push('2017-' + (i - 0));
                    }
                    return list;
                }()
            }
        ],
        yAxis: [
            {

                type: 'value',
                axisLine: {
                    lineStyle: {
//                        color: '#000080'
                    }
                }
            }
        ],
        series: [
            {
                name: '作战期间沙尘颗粒数据',
                type: 'line',
                symbol: 'none',
                smooth: true,
                color: ['#808000'],
                data: [80, 140, 100, 35, 40, 50, 30, 45],
                itemStyle: {
                    normal: {
                        label: {
                            show: true,
                            position: 'top',
                            textStyle: {
                                color: 'black',
                                fontSize: 16
                            }
                        }
                    }
                }
            },
        ]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>

<!-- 柱状图 -->
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('rainyDataTable'));

    // 指定图表的配置项和数据
    var option = {
        // title: {
        //     text: '历史雨雪数据'
        // },
        tooltip: {},
        legend: {
            data: ['每日平均', '小时最高', '月总降水量']
        },
        xAxis: {
            data: ["2017年1月", "2月", "3月", "4月", "5月", "6月"],
            type: 'category'
        },
        yAxis: {},
        series: [{
            name: '每日平均',
            smooth: true,
            type: 'bar',
            data: [0.2, 0.5, 0.4, 0.5, 1, 0]
        }, {
            name: '小时最高',
            smooth: true,
            type: 'bar',
            data: [0, 0, 0, 1, 2, 0]
        }, {
            name: '月总降水量',
            smooth: true,
            type: 'bar',
            data: [0, 0, 3, 5, 20, 13]
        }]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>

<!-- 百度地图APP　-->
<script type="text/javascript">
    // 百度地图API功能
    var map = new BMap.Map("map_demo", {minZoom: 5, maxZoom: 8});
    var lng = localStorage.getItem("lng");
    var lat = localStorage.getItem("lat");
    var point = new BMap.Point(lng, lat);

    map.centerAndZoom(point, 7);
    map.enableScrollWheelZoom();
    var marker = new BMap.Marker(point);
    map.addOverlay(marker);
    // var bounds = map.getBounds();
    // var data_info = [
    //     [91.151, 29.6125, "西藏天富工程机械有限公司<br\>地址：西藏拉萨市和平路东嘎村工程机械商业街2号<br\>联系人：<br\>联系电话：0891-6151186"],
    //     [92.141, 31.45, "公司：拉萨鸿飞工贸有限<br\>地址：西藏拉萨市堆龙德庆县团结路13号<br\>联系人：<br\>联系电话：0891-61590000"],
    //     [84.151, 32.2125, "公司：西藏重型汽车服务有限责任公司<br\>地址：西藏拉萨团结村<br\>联系人：<br\>联系电话：13704928555"],
    //     [81.171, 32.35, "公司：拉萨广天汽车修理场<br\>地址：西藏拉萨市高支路12号<br\>联系人：<br\>联系电话：021-50413751"],
    //     [89.141, 29.13, "西藏海泰汽修有限公司<br\>地址：西藏拉百善镇商业街2号<br\>联系人：<br\>联系电话：0891-6151186"],
    //     [80.25, 32.32, "公司：西藏大洼生云汽车修理厂<br\>地址：西藏曹溪镇月山村团结路13号<br\>联系人：<br\>联系电话：0891-61590000"],
    //     [88.81, 30.86, "西藏井文汽车维修有限公司<br\>地址：西藏长阳镇黄管屯村<br\>联系人：<br\>联系电话：0891-6151186"],
    //     [91.78, 32.25, "公司：永春新兴保修厂<br\>地址：西藏堆龙德庆草高支路团结路13号<br\>联系人：<br\>联系电话：0891-61590000"],
    //     [97.18, 31.12, "西藏汽车修配有限公司<br\>地址：西藏河区东陵路2号<br\>联系人：<br\>联系电话：0891-6151186"],
    //     [93.11, 29.10, "公司：西藏东瑞汽车修理场<br\>地址：西藏九原区团结路13号<br\>联系人：<br\>联系电话：0891-61590000"],
    //     [123.059, 41.122, "公司：台安县重型汽车服务有限责任公司<br\>地址：辽宁省鞍山市台安县工业园区<br\>联系人：陈美娜<br\>联系电话：13704928555"],
    //     [123.43, 41.766, "公司：沈阳市广天汽车修理场<br\>地址：沈阳市沈河区东陵路149号<br\>联系人：<br\>联系电话：024-84545001"],
    //     [121.505, 31.228, "公司：上海浦东新区龙叶汽车修理厂<br\>地址：浦东新区草高支路1250号<br\>联系人：<br\>联系电话：021-58673442"],
    //     [121.7902, 30.867, "公司：上海君文汽车修理有限公司<br\>地址：上海市浦东新区浦东北路2059弄36号<br\>联系人：<br\>联系电话：021-50413751"],
    //     [118.99, 42.405, "公司：赤峰市井文汽车维修有限公司<br\>地址：内蒙古自治区赤峰市红山物流园区2幢<br\>联系人：路飞<br\>联系电话：13848522285"],
    //     [116.48, 43.8408, "公司：锡林浩特腾飞汽车修配厂<br\>内蒙古锡林浩特县<br\>联系人：<br\>联系电话：15849389589"],
    //     [109.85, 40.69, "公司：包头市海泰汽修有限公司<br\>地址：内蒙古包头市210国道与南绕城立交桥<br\>联系人：路飞<br\>联系电话：13664774775"],
    //     [109.89, 40.23, "公司：包头市土右旗佳信重车维修服务部<br\>地址：内蒙古包头市九原区110国道683公里处<br\>联系人：<br\>联系电话：18686100268"],
    //     [116.63, 39.87, "公司：北京大洼生云汽车修理厂<br\>地址：北京市昌平区百善镇加油站后院<br\>联系人：郭生云<br\>联系电话：13601178768"],
    //     [116.133, 40.049, "公司：北京燕宏宏达汽车科技有限公司<br\>地址：北京市房山区长阳镇黄管屯村<br\>联系人：路飞<br\>联系电话：13801268841"],
    //     [118.883, 24.781, "公司：永春新兴保修厂<br\>地址：福建省泉州市永春县榜德工业区榜德南路<br\>联系人：<br\>联系电话：0595-23864528"],
    //     [117.752, 24.432, "公司：漳州市蓝田开发区东瑞汽车修理场<br\>地址：福建省漳州市蓝田开发区景檀路6号<br\>联系人：<br\>联系电话：0596-2131565"],
    //     [117.163, 25.0524, "公司：龙岩市林保汽车修配有限公司<br\>地址：福建省龙岩市新罗区曹溪镇月山村曹溪地税局南侧<br\>联系人：<br\>联系电话：0597-2775715"],
    //     [87.67, 43.77, "公司：乌鲁木齐汽车修配有限公司<br\>地址：新疆乌鲁木齐市<br\>联系人：<br\>联系电话：13801268841"]
    // ];
    // var opts = {
    //     width: 300,     // 信息窗口宽度
    //     height: 135,     // 信息窗口高度
    //     title: "公司信息", // 信息窗口标题
    //     enableMessage: true//设置允许信息窗发送短息
    // };
    // for (var i = 0; i < data_info.length; i++) {
    //     var marker = new BMap.Marker(new BMap.Point(data_info[i][0], data_info[i][1]));  // 创建标注
    //     var content = data_info[i][2];
    //     map.addOverlay(marker);               // 将标注添加到地图中
    //     addClickHandler(content, marker);
    // }
    //
    // function addClickHandler(content, marker) {
    //     marker.addEventListener("click", function (e) {
    //             openInfo(content, e)
    //         }
    //     );
    // }
    //
    // function openInfo(content, e) {
    //     var p = e.target;
    //     var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);
    //     var infoWindow = new BMap.InfoWindow(content, opts);  // 创建信息窗口对象
    //     map.openInfoWindow(infoWindow, point); //开启信息窗口
    // }


    var polyline = new BMap.Polyline([
        new BMap.Point(92.06, 31.28),
        new BMap.Point(91.351, 29.625),
        new BMap.Point(94.277, 29.546)
    ], {strokeColor: "red", strokeWeight: 2, strokeOpacity: 0.5});
    var line = new BMap.Polyline([
        new BMap.Point(90.91, 29.2725),
        new BMap.Point(91.351, 29.715)
    ], {strokeColor: "blue", strokeWeight: 2, strokeOpacity: 0.5});

    function addPolyLine() {
        map.addOverlay(polyline);
        polyline.enableEditing();
    }

    function addLine() {
        map.addOverlay(line);
        line.enableEditing();
    }

    //增加折线
    //增加多边形
    function removeLine() {
        map.removeOverlay(polyline);
        map.removeOverlay(line);
    }

    function calDegree() {
        var pointList = polyline.getPath();
        var p1 = new BMap.Point(pointList[0].lng - pointList[1].lng, pointList[0].lat - pointList[1].lat);
        var p2 = new BMap.Point(pointList[2].lng - pointList[1].lng, pointList[2].lat - pointList[1].lat);
        var res = Math.acos((p1.lng * p2.lng + p1.lat * p2.lat) / (Math.sqrt(p1.lng * p1.lng + p1.lat * p1.lat) * Math.sqrt(p2.lng * p2.lng + p2.lat * p2.lat)));
        layer.msg(res * 180 / 3.142 + "°");
    }

    function calDistance() {
        var pointList = line.getPath();
        layer.msg(map.getDistance(pointList[0], pointList[1]) + "m");
    }
</script>

</body>
</html>
